<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Hello Buyer</title>
    <link href="background.css" rel="stylesheet" type="text/css">
    <style>
      body {
        background-color: #202020;
        color: #fff;
        font-family: Arial, sans-serif;
      }
      
      h1 {
        font-size: 4em;
        text-align: center;
        margin-top: 100px;
        animation: slideIn 2s ease;
      }
      
      .button-container {
        display: flex;
        justify-content: center;
        margin-top: 50px;
      }
      
      .button {
        margin: 0 20px;
        padding: 10px 20px;
        border: 2px solid #fff;
        border-radius: 5px;
        background-color: transparent;
        color: #fff;
        font-size: 1.5em;
      }
      

      .button:hover {
        background-color: #fff;
        color: #202020;
        cursor: pointer;
        animation: pulse 0.6s ease infinite;
      }

      #search-results {
 
  color: white;
  padding: 10px;
  position: absolute;
    top: 50%;
    left: 20%;
    margin-top: -50px;
    margin-left: -50px;
    width: 600px;
    height: 300px;
  border: 1px solid black;
}
      @keyframes slideIn {
        0% {
          transform: translateX(-100%);
          opacity: 0;
        }
        100% {
          transform: translateX(0);
          opacity: 1;
        }
      }
      
      @keyframes pulse {
        0% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.1);
        }
        100% {
          transform: scale(1);
        }
      }
    </style>
    <div id="search-results"></div>
    <!-- Include the Parse SDK -->
    <script src="https://unpkg.com/parse/dist/parse.min.js"></script>

      
      <script>
    Parse.initialize("rgzBD2oDrFGwnP4GhepGqvLTb4zxUCVA8ISU94G6", "rbN8I2nlk462haH28HHxwAka3o02oVqWWz1PrFdi"); //PASTE HERE YOUR Back4App APPLICATION ID AND YOUR JavaScript KEY
    Parse.serverURL = "https://parseapi.back4app.com/";

    //search bar works, but we need to create a column for products to reference
    // (and our smart contract code). Just to get it working, it works with usernames now.


      // Define a function to execute the search
      function search() {
  const searchInput = document.getElementById("search-input");
  const searchButton = document.getElementById("search-button");
  const searchResults = document.getElementById("search-results");

  // Get the search term from the input element
  const searchTerm = searchInput.value;

  // Create a Parse query to search for the matching products
  const ProductDetails = Parse.Object.extend("Product_details");
  const query = new Parse.Query(ProductDetails);
  query.contains("ProductDescription", searchTerm);

  // Execute the query
  query.find().then((results) => {
    // Create a table element and header row
    const table = document.createElement("table");
    const headerRow = document.createElement("tr");
    const nameHeader = document.createElement("th");
    nameHeader.textContent = "Product Name";
    const descriptionHeader = document.createElement("th");
    descriptionHeader.textContent = "Description";
    const priceHeader = document.createElement("th");
    priceHeader.textContent = "Price";
    headerRow.appendChild(nameHeader);
    headerRow.appendChild(descriptionHeader);
    headerRow.appendChild(priceHeader);
    table.appendChild(headerRow);

    // Loop through the results and create a new row for each product
    results.forEach((result) => {
  const row = document.createElement("tr");
  const nameCell = document.createElement("td");
  const nameButton = document.createElement("button"); // Create a button element
  nameButton.textContent = result.get("ProductName"); // Set the text content of the button to the item name
  nameCell.appendChild(nameButton); // Add the button to the nameCell
  const descriptionCell = document.createElement("td");
  descriptionCell.textContent = result.get("ProductDescription");
  const priceCell = document.createElement("td");
  priceCell.textContent = result.get("ProductPrice");
  row.appendChild(nameCell);
  row.appendChild(descriptionCell);
  row.appendChild(priceCell);
  table.appendChild(row);
});

    // Clear any previous search results and add the new table to the page
    searchResults.innerHTML = "";
    searchResults.appendChild(table);
  }).catch((error) => {
    // Handle any errors
    console.error("Error executing query:", error);
  });
}

      function search2() {
        const searchInput = document.getElementById("search-input");
  const searchButton = document.getElementById("search-button");
  const searchResults = document.getElementById("search-results");

  // Get the search term from the input element
  const searchTerm = searchInput.value;

  // Create a Parse query to search for the matching products
  const ProductDetails = Parse.Object.extend("Product_details");
  const query = new Parse.Query(ProductDetails);
  query.contains("contractAddress", searchTerm);

  // Execute the query
  query.find().then((results) => {
    // Create a table element and header row
    const table = document.createElement("table");
    const headerRow = document.createElement("tr");
    const nameHeader = document.createElement("th");
    nameHeader.textContent = "Contract Address";
    const descriptionHeader = document.createElement("th");
    descriptionHeader.textContent = "Description";
    const priceHeader = document.createElement("th");
    priceHeader.textContent = "Price";
    headerRow.appendChild(nameHeader);
    headerRow.appendChild(descriptionHeader);
    headerRow.appendChild(priceHeader);
    table.appendChild(headerRow);

    // Loop through the results and create a new row for each product
    results.forEach((result) => {
  const row = document.createElement("tr");
  const nameCell = document.createElement("td");
  const nameButton = document.createElement("button"); // Create a button element
  nameButton.textContent = result.get("ProductName"); // Set the text content of the button to the item name
  nameButton.addEventListener("click", () => {
    window.location.href = "buyerpurchasepage.html";
  }); // Add a click event listener to the button that directs to "buyerpurchasepage.html"
  nameCell.appendChild(nameButton); // Add the button to the nameCell
  const descriptionCell = document.createElement("td");
  descriptionCell.textContent = result.get("ProductDescription");
  const priceCell = document.createElement("td");
  priceCell.textContent = result.get("ProductPrice");
  row.appendChild(nameCell);
  row.appendChild(descriptionCell);
  row.appendChild(priceCell);
  table.appendChild(row);
});

// Clear any previous search results and add the new table to the page
searchResults.innerHTML = "";
searchResults.appendChild(table);
}).catch((error) => {
  // Handle any errors
  console.error("Error executing query:", error);
});
}
      
    </script>
  </head>
  <body>
    

    <h1>Hello Buyer</h1>
    
    <button onclick="location.href = 'buyerontracts.html';">Open my Active Contracts</button>
    <input type="text" id="search-input" placeholder="Enter a product">
    <button type="button" onclick="search()">Search for New Available Product</button>
    
    <input type="text" id="search-input" placeholder="Enter a contract address">
    <button type="button" onclick="search2()">Search for New Available Contract</button>
  
  </body>
</html>


